{% load static %}
<!DOCTYPE html>
<html lang="zxx">
<head>
    {% include "css.html" %}
    <style>
        .tour-image{
            height: 450px;
            width:222px;
            object-fit: cover;
        }
    </style>
</head>

<body>
    
    {% include "header.html" %}
    {% include "loader.html" %}

    <!-- Common Banner Area -->
    <section id="common_banner">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="common_bannner_text">
                        <h2>Top destinations</h2>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><span><i class="fas fa-circle"></i></span> Top destinations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Form Area -->
    <section id="theme_search_form_tour">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="theme_search_form_area">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="tour_search_form">
                                    <form action="#!">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-12 col-sm-12 col-12">
                                                <div class="flight_Search_boxed">
                                                    <p>Destination</p>
                                                    <input type="text" placeholder="Where are you going?">
                                                    <span>Where are you going?</span>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-12">
                                                <div class="form_search_date">
                                                    <div class="flight_Search_boxed date_flex_area">
                                                        <div class="Journey_date">
                                                            <p>Journey date</p>
                                                            <input type="date" value="2022-05-03">
                                                            <span>Thursday</span>
                                                        </div>
                                                        <div class="Journey_date">
                                                            <p>Return date</p>
                                                            <input type="date" value="2022-05-05">
                                                            <span>Thursday</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2  col-md-6 col-sm-12 col-12">
                                                <div class="flight_Search_boxed dropdown_passenger_area">
                                                    <p>Passenger, Class </p>
                                                    <div class="dropdown">
                                                        <button class="dropdown-toggle final-count"
                                                            data-toggle="dropdown" type="button"
                                                            id="dropdownMenuButton1" data-bs-toggle="dropdown"
                                                            aria-expanded="false">
                                                            0 Passenger
                                                        </button>
                                                        <div class="dropdown-menu dropdown_passenger_info"
                                                            aria-labelledby="dropdownMenuButton1">
                                                            <div class="traveller-calulate-persons">
                                                                <div class="passengers">
                                                                    <h6>Passengers</h6>
                                                                    <div class="passengers-types">
                                                                        <div class="passengers-type">
                                                                            <div class="text"><span
                                                                                    class="count pcount">2</span>
                                                                                <div class="type-label">
                                                                                    <p>Adult</p>
                                                                                    <span>12+
                                                                                        yrs</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="button-set">
                                                                                <button type="button" class="btn-add">
                                                                                    <i class="fas fa-plus"></i>
                                                                                </button>
                                                                                <button type="button"
                                                                                    class="btn-subtract">
                                                                                    <i class="fas fa-minus"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="passengers-type">
                                                                            <div class="text"><span
                                                                                    class="count ccount">0</span>
                                                                                <div class="type-label">
                                                                                    <p class="fz14 mb-xs-0">
                                                                                        Children
                                                                                    </p><span>2
                                                                                        - Less than 12
                                                                                        yrs</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="button-set">
                                                                                <button type="button" class="btn-add-c">
                                                                                    <i class="fas fa-plus"></i>
                                                                                </button>
                                                                                <button type="button"
                                                                                    class="btn-subtract-c">
                                                                                    <i class="fas fa-minus"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="passengers-type">
                                                                            <div class="text"><span
                                                                                    class="count incount">0</span>
                                                                                <div class="type-label">
                                                                                    <p class="fz14 mb-xs-0">
                                                                                        Infant
                                                                                    </p><span>Less
                                                                                        than 2
                                                                                        yrs</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="button-set">
                                                                                <button type="button"
                                                                                    class="btn-add-in">
                                                                                    <i class="fas fa-plus"></i>
                                                                                </button>
                                                                                <button type="button"
                                                                                    class="btn-subtract-in">
                                                                                    <i class="fas fa-minus"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <span>Business</span>
                                                </div>
                                            </div>
                                            <div class="top_form_search_button">
                                                <button class="btn btn_theme btn_md">Search</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Destinations Areas -->
    <section id="top_testinations" class="section_padding">
        <div class="container">
            <!-- Section Heading -->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="section_heading_center">
                        <h2>{{ tour_count }} destinations found</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="left_side_search_area">
                        <div class="left_side_search_boxed">
                            <div class="left_side_search_heading">
                                <h5>Search by name</h5>
                            </div>
                            <div class="name_search_form">
                                <input type="text" class="form-control" placeholder="e.g Deluxe bus">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        <!-- Filter by Price Slider -->
                        <div class="left_side_search_boxed">
                            <div class="left_side_search_heading">
                                <h5>Filter by price</h5>
                            </div>
                            <div id="price-slider"></div>
                            <div class="filter_price_range">
                                <input type="text" id="price-range-min" >
                                <input type="text" id="price-range-max" >
                            </div>
                            <button class="apply" type="button" id="apply-price">Apply</button>
                        </div>
                        
                        <div class="left_side_search_boxed">
                            <div class="left_side_search_heading">
                                <h5>Filter by Review</h5>
                            </div>
                            <div class="filter_review">
                                <form class="review_star">
                                    <div class="form-check">
                                        <input class="form-check-input review-checkbox" type="checkbox" value="5" id="five-star">
                                        <label class="form-check-label" for="flexCheckDefault">
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            & Up
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input review-checkbox" type="checkbox" value="4" id="five-star">
                                        <label class="form-check-label" for="flexCheckDefault1">
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            &up
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input review-checkbox" type="checkbox" value="3" id="five-star">
                                        <label class="form-check-label" for="flexCheckDefault2">
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            &up
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input review-checkbox" type="checkbox" value="2" id="five-star">
                                        <label class="form-check-label" for="flexCheckDefault3">
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            &up
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input review-checkbox" type="checkbox" value="1" id="five-star">
                                        <label class="form-check-label" for="flexCheckDefault5">
                                            <i class="fas fa-star color_theme"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            <i class="fas fa-star color_asse"></i>
                                            &up
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="left_side_search_boxed">
                            <div class="left_side_search_heading">
                                <h5>Tour type</h5>
                            </div>
                            <div class="tour_search_type">
                                {% for tour in tour1 %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefaultf1">
                                        <label class="form-check-label" for="flexCheckDefaultf1">
                                            <span class="area_flex_one">
                                                <span>{{ tour.tour_type }}</span>
                                            </span>
                                        </label>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="row">
                        {% for tour in tour1 %}
                        <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                            <div class="top_destinations_box img_hover">
                                <!-- <div class="heart_destinations">
                                    <i class="fas fa-heart"></i>
                                </div> -->
                                <a href="{% url 'tour_detail' slug=tour.tour_slug %}"><img class="tour-image" src="{{ tour.tour_image.url }}"
                                        alt="img"></a>
                                <div class="top_destinations_box_content">
                                    <h4><a href="{% url 'tour_detail' slug=tour.tour_slug %}">{{ tour.name }}</a></h4>
                                    <p><span class="review_rating">{{ tour.rating }}/5 star</span> 
                                        <span class="review_count">{{ tour.tour_type }}</span></p>
                                    <h3>â‚¹{{ tour.total_price }}<span>Price starts from</span></h3>
                                </div>
                            </div>
                        </div>
                        {% endfor %}

                        <div class="col-lg-12">
                            <div class="pagination_area">
                                <ul class="pagination">
                                    {% if tour1.has_previous %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page=1" aria-label="First">
                                                <span aria-hidden="true">&laquo;&laquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ tour1.previous_page_number }}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% for page_num in tour1.paginator.page_range %}
                                        {% if tour1.number == page_num %}
                                            <li class="page-item active"><span class="page-link">{{ page_num }}</span></li>
                                        {% else %}
                                            <li class="page-item"><a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a></li>
                                        {% endif %}
                                    {% endfor %}
                        
                                    {% if tour1.has_next %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ tour1.next_page_number }}" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ tour1.paginator.num_pages }}" aria-label="Last">
                                                <span aria-hidden="true">&raquo;&raquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Footer  -->
    {% include "footer.html" %}

    <script>
        // Initialize the price slider
        var priceSlider = document.getElementById("price-slider");
        var priceMin = document.getElementById("price-range-min");
        var priceMax = document.getElementById("price-range-max"); 
    
        noUiSlider.create(priceSlider, {
            start: [0, 1000], // Initial price range, adjust as needed
            connect: true,
            range: {
                'min': 0,
                'max': 1000 // Max price, adjust as needed
            }
        });
    
        // Update price range inputs on slider change
        priceSlider.noUiSlider.on('update', function (values, handle) {
            if (handle) {
                priceMax.value = values[handle];
            } else {
                priceMin.value = values[handle];
            }
        });
    
        // Apply price filter
        document.getElementById('apply-price').addEventListener('click', function () {
            var minPrice = parseInt(priceMin.value);
            var maxPrice = parseInt(priceMax.value);
    
            // Redirect to the same page with price filter parameters
            window.location.href = "{% url 'tour_user_list' %}?min_price=" + minPrice + "&max_price=" + maxPrice;
        });
    
        // Apply rating filter
        var reviewCheckboxes = document.querySelectorAll('.review-checkbox');
        reviewCheckboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                var selectedRatings = [];
                reviewCheckboxes.forEach(function (cb) {
                    if (cb.checked) {
                        selectedRatings.push(cb.value);
                    }
                });
    
                // Redirect to the same page with rating filter parameters
                window.location.href = "{% url 'tour_user_list' %}?ratings=" + selectedRatings.join(",");
            });
        });
    </script>

    {% include "js.html" %}
    <script src="{% static 'assets/js/nouislider.min.js' %}"></script>
    <script src="{% static 'assets/js/wNumb.js' %}"></script>
</body>
</html>












<input type="hidden" id="includedJson" name="includeds" value="" required>
<!-- here add the included section where multiple fields are added with an "Add included option" button and deleted with a "Delete" button -->

<div id="includedContainer" class="form-input"></div>
<label class="button h-50 px-24 -dark-1 bg-blue-1 text-white" onclick="addIncludedField()">Add included option</label>

<div class="d-inline-block pt-30">
    <buutton class="button h-50 px-24 -dark-1 bg-blue-1 text-white" onclick="saveIncludedFields()">
        Submit
    </button>
</div>

<script>
    let includedFields = []; // Array to store included fields

    // Function to add a new included field
    function addIncludedField() {
        const includedContainer = document.getElementById('includedContainer');

        const newField = document.createElement('div');
        newField.className = 'row x-gap-20 y-gap-20 included-field';

        const fieldName = document.createElement('input');
        fieldName.type = 'text';
        fieldName.className = 'form-control included-name';
        fieldName.placeholder = 'Field Name';
        fieldName.required = true;

        const deleteButton = document.createElement('button');
        deleteButton.type = 'button';
        deleteButton.className = 'btn btn-danger delete-button';
        deleteButton.innerHTML = 'Delete';
        deleteButton.addEventListener('click', function() {
            includedContainer.removeChild(newField);
            includedFields = includedFields.filter(field => field !== newField);
            updateIncludedJson();
        });

        newField.appendChild(fieldName);
        newField.appendChild(deleteButton);

        includedContainer.appendChild(newField);
        includedFields.push(newField);
        updateIncludedJson();
    }

    // Function to update the hidden input "includedJson" with the current included fields in JSON format
    function updateIncludedJson() {
        const includedData = {};
        includedFields.forEach((field, index) => {
            const fieldName = field.querySelector('.included-name').value;
            includedData[index + 1] = fieldName;
        });

        document.getElementById('includedJson').value = JSON.stringify(includedData);
    }

    // Function to save included fields when "Save Changes" is clicked
    function saveIncludedFields() {
        updateIncludedJson();
        const includedJson = document.getElementById('includedJson').value;
        alert(includedJson);
        console.log(includedJson);
    }
</script>































{% comment %} new tour backup
{% extends "base.html" %}
{% load static %}
{% block css %}
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/css/multi-select-tag.css"> 
{% endblock %}
  
{% block title %}Add Tour{% endblock %}
{% block dashboard %}
<div class="dashboard__main">
  
  <div class="dashboard__content">
    <div class="row y-gap-20 justify-between items-end pb-20 lg:pb-40 md:pb-32">
      <div class="col-auto">
        <h1 class="text-30 lh-14 fw-600">Add Tour</h1>
        <div class="text-15 text-light-1">Let's add new tour to make swan tour more and more bigger.</div>
      </div>
      <div class="col-auto">
      </div>
    </div>
    <div class="py-30 px-30 rounded-4 bg-white custom_shadow">
      <div class="tabs -underline-2 js-tabs">
        <div class="tabs__controls row x-gap-40 y-gap-10 lg:x-gap-20 js-tabs-controls">
          <div class="col-auto">
            <button
              class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button is-tab-el-active"
              data-tab-target=".-tab-item-1">Tour information</button>
          </div>
          <div class="col-auto">
            <button class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button "
              data-tab-target=".-tab-item-2"> Image</button>
          </div>
          <div class="col-auto">
            <button class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button " disabled
              data-tab-target=".-tab-item-3"> itinerary</button>
          </div>
          <div class="col-auto">
            <button class="tabs__button text-18 lg:text-16 text-light-1 fw-500 pb-5 lg:pb-0 js-tabs-button " disabled
              data-tab-target=".-tab-item-4"> Map</button>
          </div>
        </div>
        <div class="tabs__content pt-30 js-tabs-content">
            <form action="{% url 'new_tour' %}" id="new_tour_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
                <div class="tabs__pane -tab-item-1 is-tab-el-active">
                <div class="col-xl-10">
                    <div class="border-top-light mt-30 mb-30"></div>
                    <div class="row x-gap-20 y-gap-20">
                        <!-- ... other fields ... -->
                        <div class="col-6">
                        <div class="form-input">
                            <label for="name" class="lh-1 text-16 text-light-1">Name of the tour</label>
                            <input type="text" name="name" placeholder="Enter name" required>
                        </div>
                        </div>
                        <div class="col-6">
                        <div class="form-input ">
                            <label class="lh-1 text-16 text-light-1">Tour type</label>
                            <select class="form-control form-select bg_input" name="tour_type" required>
                            <option value="" disabled selected>Select tour type</option>
                            {% for tourtype in tourtypes %}
                            <option value="{{tourtype.id}}">{{tourtype.name}}</option>
                            {% endfor %}
                            </select>
                        </div>
                        </div>
                        <div class="col-6">
                        <div class="form-input ">
                            <label class="lh-1 text-16 text-light-1">Group size</label>
                            <input type="number" name="group_size" required>
                        </div>
                        </div>
                        <div class="col-6">
                        <div class="form-input ">
                            <label class="lh-1 text-16 text-light-1">Citys</label>
                            <select class="form-control form-select bg_input"  id="city" name="city" multiple required>
                            {% for city in cities %}
                            <option value="{{city.id}}">{{city.name}}</option>
                            {% endfor %}
                            </select>
                        </div>
                        </div>

                        <div class="col-6">
                          <div class="form-input ">
                              <label class="lh-1 text-16 text-light-1">Places</label>
                              <select class="form-control form-select bg_input" id=place name="place" multiple required>
                              {% for place in places %}
                              <option value="{{place.id}}">{{place.name}}</option>
                              {% endfor %}
                              </select>
                          </div>
                        </div>

                        {% comment %} <div class="col-6">
                          <div class="form-input ">
                              <label class="lh-1 text-16 text-light-1">Places</label>
                              <select class="form-control form-select bg_input" id="place" name="place" multiple required>
                                  {% for place in places %}
                                      <option value="{{ place.id }}" data-city="{{ place.city.id }}">{{ place.name }}</option>
                                  {% endfor %}
                              </select>
                          </div>
                        </div>                         {% endcomment %}
                        <div class="col-6">
                            <div class="form-input ">
                                <label class="lh-1 text-16 text-light-1">Map link</label>
                                <input type="url" name="map_link" required>
                            </div>
                            </div>
                            <div class="col-6">
                            <div class="form-input ">
                                <label class="lh-1 text-16 text-light-1">Overview</label>
                                <textarea name="overview" required></textarea>
                            </div>
                            </div>
                            <div class="col-6">
                            <div class="form-input ">
                                <label class="lh-1 text-16 text-light-1">Hotels</label>
                                <select class="form-control form-select bg_input" id="hotel" name="hotels" multiple required>
                                {% for hotel in hotels %}
                                <option value="{{hotel.id}}">{{hotel.hotelname}}</option>
                                {% endfor %}
                                </select>
                            </div>
                            </div>
                            <div class="col-6">
                            <div class="form-input ">
                                <label class="form-control form-select bg_input" class="lh-1 text-16 text-light-1">Buses</label>
                                <select name="buses" id="bus"  multiple required>
                                {% for bus in buses %}
                                <option value="{{bus.id}}">{{bus.name}}</option>
                                {% endfor %}
                                </select>
                            </div>
                            </div>
                            <div class="col-6">
                            <div class="form-input">
                                <label class="lh-1 text-16 text-light-1">Start Date</label>
                                <input type="date" id="startDate" name="start_date" required>
                            </div>
                            </div>
                            <div class="col-6">
                            <div class="form-input">
                                <label class="lh-1 text-16 text-light-1">End Date</label>
                                <input type="date" id="endDate" name="end_date" required>
                            </div>
                            </div>
                            <div class="col-6">
                              <div class="form-input ">
                                  <label class="lh-1 text-16 text-light-1">Total Price</label>
                                  <input type="number" name="total_price" required>
                              </div>
                            </div>
                            <input type="hidden" name="rating" value=0>
                            <input type="hidden" name="no_of_day" id="no_of_day" value="">
                            {% comment %} <div id="inputContainer" class="form-input"></div> {% endcomment %}
    
                            <input type="hidden" id="itineraryJson" name="Itineraries" value="" required>
                            <div class="form-input ">
                                <button class="button h-50 px-24 -dark-1 bg-blue-1 text-white">Save Details</button>
                            </div>
                        </div>
                    </div>   
                    </div>
                </form>
                <form action="{% url 'new_tour' %}" id="new_tour_form" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="tabs__pane -tab-item-2">
                    <div class="col-xl-10">
                      <div class="row x-gap-20 y-gap-20">
                        <div class="col-12">
                          <div class="form-input ">
                            <label class="lh-1 text-16 text-light-1">Tour Image</label>
                            <input class="form-control form-control-lg" name="tour_image" multiple  type="file">
                        </div>
                        </div>
                        <div id="inputContainer" class="form-input"></div>
                        <!-- here add the inncluded section where multiple field added with add add button and deleted with delte button and after that all this field converted in json -->
                        <div id="includedContainer" class="form-input"></div>
                        <label class="button h-50 px-24 -dark-1 bg-blue-1 text-white" onclick="addIncludedField()">Add included option</label>
                      </div>
                      <div class="d-inline-block pt-30">
                        <button  class="button h-50 px-24 -dark-1 bg-blue-1 text-white">
                          Save Changes
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
            </div>
          </div>
        </div>
        {% include "db_footer.html" %}
      </div>
    </div>
    <!-- Genratinfg itinerary n number of input base date selection-->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const inputContainer = document.getElementById('inputContainer');
        
    
        function createInputs() {
          const startDate = new Date(startDateInput.value);
          const endDate = new Date(endDateInput.value);
          const oneDayInMilliseconds = 24 * 60 * 60 * 1000;
          const diffDays = Math.round(Math.abs((endDate - startDate) / oneDayInMilliseconds));
      
          function no_of_day() {
            document.getElementById('no_of_day').value = diffDays + 1;
          }
      
          no_of_day();
          inputContainer.innerHTML = '';
          for (let i = 0; i < diffDays + 1; i++) {
            const input = document.createElement('input');
            input.type = 'text';
            input.name = `day_${i + 1}`;
            input.placeholder = `Day ${i + 1}`;
            input.required = true;
            inputContainer.appendChild(input);
          }
        }
      
        startDateInput.addEventListener('change', createInputs);
        endDateInput.addEventListener('change', createInputs);
      
        document.getElementById('new_tour_form').addEventListener('submit', function(event) {
          const inputs = inputContainer.querySelectorAll('input');
          const data = {};
          inputs.forEach(input => {
            data[input.name] = input.value;
          });
          document.getElementById('itineraryJson').value = JSON.stringify(data);
          jsdata = JSON.stringify(data);
          alert(jsdata)
          conole.log(jsdata)
        });
      
      });
    </script>
    <script>
      const includedContainer = document.getElementById('includedContainer')
          let includedFields = []; // Array to store included fields
    
        // Function to add a new included field
        function addIncludedField() {
            const includedContainer = document.getElementById('includedContainer');
    
            const newField = document.createElement('div');
            newField.className = 'row x-gap-20 y-gap-20 included-field';
    
            const fieldName = document.createElement('input');
            fieldName.type = 'text';
            fieldName.className = 'form-control';
            fieldName.placeholder = 'Field Name';
            fieldName.name = 'included_field_name[]'; // Use an array for multiple values
            fieldName.required = true;
    
            const deleteButton = document.createElement('button');
            deleteButton.type = 'button';
            deleteButton.className = 'btn btn-danger';
            deleteButton.innerHTML = 'Delete';
            deleteButton.addEventListener('click', function() {
                includedContainer.removeChild(newField);
                includedFields = includedFields.filter(field => field !== newField);
            });
    
            newField.appendChild(fieldName);
            newField.appendChild(deleteButton);
    
            includedContainer.appendChild(newField);
            includedFields.push(newField);
        }
    </script>
    <!-- Calender Validation -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const today = new Date().toISOString().split('T')[0]; // Get today's date in YYYY-MM-DD format
        // Set the min attribute for both startDate and endDate to today's date
        document.getElementById('startDate').setAttribute('min', today);
        document.getElementById('endDate').setAttribute('min', today);
       });
    </script>
    
    <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/js/multi-select-tag.js"></script>
    <script>
      new MultiSelectTag('city') //id
      new MultiSelectTag('place') //id
      new MultiSelectTag('hotel') //id
      new MultiSelectTag('bus') //id
    </script>
    
    <!--Dependednt Js which is not working-->
    <script>
      // Disable the "Place" dropdown initially
      document.addEventListener('DOMContentLoaded', function() {
        const place = document.getElementById('place');
        place.disabled = true; // Disable the "Place" dropdown initially
      });
      
      document.getElementById('city').addEventListener('change', updatePlaceOptions);
      
      function updatePlaceOptions() {
        const city = document.getElementById('city');
        const selectedCityId = city.value;
        
        const place = document.getElementById('place');
        const placeOptions = place.querySelectorAll('option');
        
        // Reset the options in the "Place" dropdown
        placeOptions.forEach(option => {
          option.style.display = '';
        });
        
        // Enable the "Place" dropdown if a city is selected 
        if (selectedCityId) {
          place.disabled = false; // Enable the "Place" dropdown
        } else {
          place.disabled = true; // Disable the "Place" dropdown if no city is selected
        }
        // Filter the "Place" options based on the selected city
        if (selectedCityId) {
          placeOptions.forEach(option => {
            if (option.dataset.city !== selectedCityId) {
              option.style.display = 'none';
            }
          });
        }
      }
    </script>
    
    
    {% endblock %}

{% endcomment %}